{
  "version": 3,
  "sources": ["../../redux-persist/es/persistStore.js"],
  "sourcesContent": ["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\r\n\r\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\r\n\r\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\r\n\r\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\r\n\r\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\r\n\r\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\r\n\r\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\r\n\r\nimport { createStore } from 'redux';\r\nimport { FLUSH, PAUSE, PERSIST, PURGE, REGISTER, REHYDRATE } from './constants';\r\nvar initialState = {\r\n  registry: [],\r\n  bootstrapped: false\r\n};\r\n\r\nvar persistorReducer = function persistorReducer() {\r\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\r\n  var action = arguments.length > 1 ? arguments[1] : undefined;\r\n\r\n  switch (action.type) {\r\n    case REGISTER:\r\n      return _objectSpread({}, state, {\r\n        registry: [].concat(_toConsumableArray(state.registry), [action.key])\r\n      });\r\n\r\n    case REHYDRATE:\r\n      var firstIndex = state.registry.indexOf(action.key);\r\n\r\n      var registry = _toConsumableArray(state.registry);\r\n\r\n      registry.splice(firstIndex, 1);\r\n      return _objectSpread({}, state, {\r\n        registry: registry,\r\n        bootstrapped: registry.length === 0\r\n      });\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default function persistStore(store, options, cb) {\r\n  // help catch incorrect usage of passing PersistConfig in as PersistorOptions\r\n  if (process.env.NODE_ENV !== 'production') {\r\n    var optionsToTest = options || {};\r\n    var bannedKeys = ['blacklist', 'whitelist', 'transforms', 'storage', 'keyPrefix', 'migrate'];\r\n    bannedKeys.forEach(function (k) {\r\n      if (!!optionsToTest[k]) console.error(\"redux-persist: invalid option passed to persistStore: \\\"\".concat(k, \"\\\". You may be incorrectly passing persistConfig into persistStore, whereas it should be passed into persistReducer.\"));\r\n    });\r\n  }\r\n\r\n  var boostrappedCb = cb || false;\r\n\r\n  var _pStore = createStore(persistorReducer, initialState, options && options.enhancer ? options.enhancer : undefined);\r\n\r\n  var register = function register(key) {\r\n    _pStore.dispatch({\r\n      type: REGISTER,\r\n      key: key\r\n    });\r\n  };\r\n\r\n  var rehydrate = function rehydrate(key, payload, err) {\r\n    var rehydrateAction = {\r\n      type: REHYDRATE,\r\n      payload: payload,\r\n      err: err,\r\n      key: key // dispatch to `store` to rehydrate and `persistor` to track result\r\n\r\n    };\r\n    store.dispatch(rehydrateAction);\r\n\r\n    _pStore.dispatch(rehydrateAction);\r\n\r\n    if (boostrappedCb && persistor.getState().bootstrapped) {\r\n      boostrappedCb();\r\n      boostrappedCb = false;\r\n    }\r\n  };\r\n\r\n  var persistor = _objectSpread({}, _pStore, {\r\n    purge: function purge() {\r\n      var results = [];\r\n      store.dispatch({\r\n        type: PURGE,\r\n        result: function result(purgeResult) {\r\n          results.push(purgeResult);\r\n        }\r\n      });\r\n      return Promise.all(results);\r\n    },\r\n    flush: function flush() {\r\n      var results = [];\r\n      store.dispatch({\r\n        type: FLUSH,\r\n        result: function result(flushResult) {\r\n          results.push(flushResult);\r\n        }\r\n      });\r\n      return Promise.all(results);\r\n    },\r\n    pause: function pause() {\r\n      store.dispatch({\r\n        type: PAUSE\r\n      });\r\n    },\r\n    persist: function persist() {\r\n      store.dispatch({\r\n        type: PERSIST,\r\n        register: register,\r\n        rehydrate: rehydrate\r\n      });\r\n    }\r\n  });\r\n\r\n  if (!(options && options.manualPersist)) {\r\n    persistor.persist();\r\n  }\r\n\r\n  return persistor;\r\n}"],
  "mappings": ";;;;;;;;;;;;;;AAAA,SAAS,mBAAmB,KAAK;AAAE,SAAO,mBAAmB,GAAG,KAAK,iBAAiB,GAAG,KAAK,mBAAmB;AAAG;AAEpH,SAAS,qBAAqB;AAAE,QAAM,IAAI,UAAU,iDAAiD;AAAG;AAExG,SAAS,iBAAiB,MAAM;AAAE,MAAI,OAAO,YAAY,OAAO,IAAI,KAAK,OAAO,UAAU,SAAS,KAAK,IAAI,MAAM;AAAsB,WAAO,MAAM,KAAK,IAAI;AAAG;AAEjK,SAAS,mBAAmB,KAAK;AAAE,MAAI,MAAM,QAAQ,GAAG,GAAG;AAAE,aAAS,IAAI,GAAG,OAAO,IAAI,MAAM,IAAI,MAAM,GAAG,IAAI,IAAI,QAAQ,KAAK;AAAE,WAAK,CAAC,IAAI,IAAI,CAAC;AAAA,IAAG;AAAE,WAAO;AAAA,EAAM;AAAE;AAErK,SAAS,QAAQ,QAAQ,gBAAgB;AAAE,MAAI,OAAO,OAAO,KAAK,MAAM;AAAG,MAAI,OAAO,uBAAuB;AAAE,QAAI,UAAU,OAAO,sBAAsB,MAAM;AAAG,QAAI;AAAgB,gBAAU,QAAQ,OAAO,SAAU,KAAK;AAAE,eAAO,OAAO,yBAAyB,QAAQ,GAAG,EAAE;AAAA,MAAY,CAAC;AAAG,SAAK,KAAK,MAAM,MAAM,OAAO;AAAA,EAAG;AAAE,SAAO;AAAM;AAEpV,SAAS,cAAc,QAAQ;AAAE,WAAS,IAAI,GAAG,IAAI,UAAU,QAAQ,KAAK;AAAE,QAAI,SAAS,UAAU,CAAC,KAAK,OAAO,UAAU,CAAC,IAAI,CAAC;AAAG,QAAI,IAAI,GAAG;AAAE,cAAQ,QAAQ,IAAI,EAAE,QAAQ,SAAU,KAAK;AAAE,wBAAgB,QAAQ,KAAK,OAAO,GAAG,CAAC;AAAA,MAAG,CAAC;AAAA,IAAG,WAAW,OAAO,2BAA2B;AAAE,aAAO,iBAAiB,QAAQ,OAAO,0BAA0B,MAAM,CAAC;AAAA,IAAG,OAAO;AAAE,cAAQ,MAAM,EAAE,QAAQ,SAAU,KAAK;AAAE,eAAO,eAAe,QAAQ,KAAK,OAAO,yBAAyB,QAAQ,GAAG,CAAC;AAAA,MAAG,CAAC;AAAA,IAAG;AAAA,EAAE;AAAE,SAAO;AAAQ;AAErgB,SAAS,gBAAgB,KAAK,KAAK,OAAO;AAAE,MAAI,OAAO,KAAK;AAAE,WAAO,eAAe,KAAK,KAAK,EAAE,OAAc,YAAY,MAAM,cAAc,MAAM,UAAU,KAAK,CAAC;AAAA,EAAG,OAAO;AAAE,QAAI,GAAG,IAAI;AAAA,EAAO;AAAE,SAAO;AAAK;AAIhN,IAAI,eAAe;AAAA,EACjB,UAAU,CAAC;AAAA,EACX,cAAc;AAChB;AAEA,IAAI,mBAAmB,SAASA,oBAAmB;AACjD,MAAI,QAAQ,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM,SAAY,UAAU,CAAC,IAAI;AAChF,MAAI,SAAS,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI;AAEnD,UAAQ,OAAO,MAAM;AAAA,IACnB,KAAK;AACH,aAAO,cAAc,CAAC,GAAG,OAAO;AAAA,QAC9B,UAAU,CAAC,EAAE,OAAO,mBAAmB,MAAM,QAAQ,GAAG,CAAC,OAAO,GAAG,CAAC;AAAA,MACtE,CAAC;AAAA,IAEH,KAAK;AACH,UAAI,aAAa,MAAM,SAAS,QAAQ,OAAO,GAAG;AAElD,UAAI,WAAW,mBAAmB,MAAM,QAAQ;AAEhD,eAAS,OAAO,YAAY,CAAC;AAC7B,aAAO,cAAc,CAAC,GAAG,OAAO;AAAA,QAC9B;AAAA,QACA,cAAc,SAAS,WAAW;AAAA,MACpC,CAAC;AAAA,IAEH;AACE,aAAO;AAAA,EACX;AACF;AAEe,SAAR,aAA8B,OAAO,SAAS,IAAI;AAEvD,MAAI,MAAuC;AACzC,QAAI,gBAAgB,WAAW,CAAC;AAChC,QAAI,aAAa,CAAC,aAAa,aAAa,cAAc,WAAW,aAAa,SAAS;AAC3F,eAAW,QAAQ,SAAU,GAAG;AAC9B,UAAI,CAAC,CAAC,cAAc,CAAC;AAAG,gBAAQ,MAAM,0DAA2D,OAAO,GAAG,qHAAsH,CAAC;AAAA,IACpO,CAAC;AAAA,EACH;AAEA,MAAI,gBAAgB,MAAM;AAE1B,MAAI,UAAU,YAAY,kBAAkB,cAAc,WAAW,QAAQ,WAAW,QAAQ,WAAW,MAAS;AAEpH,MAAI,WAAW,SAASC,UAAS,KAAK;AACpC,YAAQ,SAAS;AAAA,MACf,MAAM;AAAA,MACN;AAAA,IACF,CAAC;AAAA,EACH;AAEA,MAAI,YAAY,SAASC,WAAU,KAAK,SAAS,KAAK;AACpD,QAAI,kBAAkB;AAAA,MACpB,MAAM;AAAA,MACN;AAAA,MACA;AAAA,MACA;AAAA;AAAA,IAEF;AACA,UAAM,SAAS,eAAe;AAE9B,YAAQ,SAAS,eAAe;AAEhC,QAAI,iBAAiB,UAAU,SAAS,EAAE,cAAc;AACtD,oBAAc;AACd,sBAAgB;AAAA,IAClB;AAAA,EACF;AAEA,MAAI,YAAY,cAAc,CAAC,GAAG,SAAS;AAAA,IACzC,OAAO,SAAS,QAAQ;AACtB,UAAI,UAAU,CAAC;AACf,YAAM,SAAS;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,SAAS,OAAO,aAAa;AACnC,kBAAQ,KAAK,WAAW;AAAA,QAC1B;AAAA,MACF,CAAC;AACD,aAAO,QAAQ,IAAI,OAAO;AAAA,IAC5B;AAAA,IACA,OAAO,SAAS,QAAQ;AACtB,UAAI,UAAU,CAAC;AACf,YAAM,SAAS;AAAA,QACb,MAAM;AAAA,QACN,QAAQ,SAAS,OAAO,aAAa;AACnC,kBAAQ,KAAK,WAAW;AAAA,QAC1B;AAAA,MACF,CAAC;AACD,aAAO,QAAQ,IAAI,OAAO;AAAA,IAC5B;AAAA,IACA,OAAO,SAAS,QAAQ;AACtB,YAAM,SAAS;AAAA,QACb,MAAM;AAAA,MACR,CAAC;AAAA,IACH;AAAA,IACA,SAAS,SAAS,UAAU;AAC1B,YAAM,SAAS;AAAA,QACb,MAAM;AAAA,QACN;AAAA,QACA;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AAED,MAAI,EAAE,WAAW,QAAQ,gBAAgB;AACvC,cAAU,QAAQ;AAAA,EACpB;AAEA,SAAO;AACT;",
  "names": ["persistorReducer", "register", "rehydrate"]
}
